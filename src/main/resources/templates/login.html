<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head th:replace="fragments/header :: header(title='Log In')">
</head>
<body>

	<nav th:replace="fragments/navbar :: navbar(title='Log In')"></nav>

	<div class="container-fluid main">
		<div class="row-fluid">
			<div class="span10 offset1">
<!-- begin page content -->

				<div class="panel panel-primary">
					<div class="panel-heading">
						<h3 class="panel-title">Log In</h3>
					</div>
					<div class="panel-body">
						Use this page to log in by selecting an existing preset or selecting 'Other' and entering an
						<code>issuer URI</code>
						or a
						<code>webfinger identifier</code>.
					</div>
				</div>

				<div class="well">
					<div class="row row-full-height">
						<!--<div class="col-xs-3 col-xs-height col-full-height">
							<button class="btn btn-block btn-default" id="localhost">Local MITREid Connect
								Server (default setup)</button>
								
							<button class="btn btn-block btn-default" id="localhost2">Local MITREid Connect
								Server #2</button>
							
							<button class="btn btn-block btn-default" id="mitreidorg">mitre.org
								integration site demo user</button>
						</div>
	
						<div class="col-xs-9 col-xs-height col-full-height">
	
							<form name="identifier_form" class="form-inline" action="openid_connect_login" onsubmit="return validateForm()" method="get">
								<input type="text" class="form-control" name="identifier"
										id="identifier" placeholder="URI or identifier" />
								<button type="submit" class="btn btn-primary">Log In</button>
							</form>
	
						</div>-->
						
						<div class="col-md-12">
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th class="col-sm-1"></th>
										<th class="col-sm-4"><h4><b>Name</b></h4></th>
										<th class="col-sm-7"><h4><b>URI or Identifier</b></h4></th>
									</tr>
								</thead>
								<tbody>
									<tr class="login-table-row">
										<td>
											<input type="radio" class="custom-radio" id="opt1" name="login-options">
										</td>
										<td>
											<h4 class="text-primary">Local MITREid Connect Server (Default setup)</h4>
										</td>
										<td>
											<h4>http://localhost:8080/openid-connect-server-webapp/</h4>
										</td>
									</tr>
									<tr class="login-table-row">
										<td>
											<input type="radio" class="custom-radio" id="opt2" name="login-options">
										</td>
										<td>
											<h4 class="text-primary">Local MITREid Connect Server #2</h4>
										</td>
										<td>
											<h4>http://localhost:8080/my-openid-connect-server/</h4>
										</td>
									</tr>
									<tr class="login-table-row">
										<td>
											<input type="radio" class="custom-radio" id="opt3" name="login-options">
										</td>
										<td>
											<h4 class="text-primary">mitre.org integration site demo user</h4>
										</td>
										<td>
											<h4>user@mitre.org</h4>
										</td>
									</tr>
									
									<tr class="login-table-row">
										<td>
											<input type="radio" class="custom-radio" id="opt4" name="login-options">
										</td>
										<td>
											<h4 class="text-primary">Other:</h4>
										</td>
										<td>
											<input type="text" class="form-control identifier-input" name="identifier"
												id="identifier-field" placeholder="Enter URI or identifier" />
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-12 text-center">
						<form name="identifier_form" action="openid_connect_login" method="get" onsubmit="return validateForm()">
							<input type="hidden" name="identifier" id="identifier" value=""/>
							<button type="submit" id="login-button" class="btn btn-primary">Log In</button>
						</form>
					</div>
				</div>

<!-- end page content -->
			
			</div>
		</div>	
	</div>

	<th:block th:include="fragments/jslib :: jslib"></th:block>
	
	<script type="text/javascript">
		$(document).ready(
			function() {
				$('#login-button').on('click',
					function() {
						if (document.getElementById('opt1').checked) {
							$('#identifier').val('http://localhost:8080/openid-connect-server-webapp/');
						}
						else if (document.getElementById('opt2').checked) {
							$('#identifier').val('http://localhost:8080/my-openid-connect-server/');
						}
						else if (document.getElementById('opt3').checked) {
							$('#identifier').val('user@mitre.org');
						}
						else if (document.getElementById('opt4').checked) {
							$('#identifier').val(document.getElementById('identifier-field').value);
						}
					});
			}
		);
	</script>
	
	<script type="text/javascript">
		$(document).ready(
			function() {
				$('#localhost').on('click',
					function() {
						$('#identifier').val('http://localhost:8080/openid-connect-server-webapp/');
					});
				$('#localhost2').on('click',
					function() {
						$('#identifier').val('http://localhost:8080/my-openid-connect-server/');
					});
				$('#mitreidorg').on('click',
					function() {
						$('#identifier').val('user@mitreid.org');
					});
			});
	</script>
	
	<script type="text/javascript">
		function validateForm() {
			var input = document.forms['identifier_form']['identifier'].value;
			if (input == null || input == "") {
				alert("Please enter a valid issuer URI or webfinger identifier.")
				return false;
			}
		}
	</script>
</body>
</html>
